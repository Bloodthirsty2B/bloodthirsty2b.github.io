<!DOCTYPE html><html><head><meta charset="utf-8"><title>canvas2d系统和基本绘制 | BS2B&#39;s blog</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="简单地说：初始状态的canvas是一张透明的画布，我们能用不同方法在canvas上画图。 1&lt;canvas width&#x3D;&quot;1440&quot; height&#x3D;&quot;720&quot;&gt;&lt;&#x2F;canvas&gt;  canvas标签的特性只有宽和高可以设置。css中也可以改变它的宽高，但是默认保持原始宽高比。如果在css中强行同时设置宽高的话canvas标签和里面的"><meta property="og:type" content="article"><meta property="og:title" content="canvas2d系统和基本绘制"><meta property="og:url" content="https://bloodthirsty2b.github.io/2022/12/11/canvas/canvas2d%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/index.html"><meta property="og:site_name" content="BS2B&#39;s blog"><meta property="og:description" content="简单地说：初始状态的canvas是一张透明的画布，我们能用不同方法在canvas上画图。 1&lt;canvas width&#x3D;&quot;1440&quot; height&#x3D;&quot;720&quot;&gt;&lt;&#x2F;canvas&gt;  canvas标签的特性只有宽和高可以设置。css中也可以改变它的宽高，但是默认保持原始宽高比。如果在css中强行同时设置宽高的话canvas标签和里面的"><meta property="og:locale"><meta property="og:image" content="https://bloodthirsty2b.github.io/images/canvas/canvas_basic/Canvas_default_grid.png"><meta property="og:image" content="https://bloodthirsty2b.github.io/images/canvas/canvas_basic/Canvas_linecap.png"><meta property="og:image" content="https://bloodthirsty2b.github.io/images/canvas/canvas_basic/Canvas_linejoin.png"><meta property="og:image" content="https://bloodthirsty2b.github.io/images/canvas/canvas_basic/Canvas_miterlimit.png"><meta property="article:published_time" content="2022-12-11T11:50:51.000Z"><meta property="article:modified_time" content="2021-12-20T15:55:09.667Z"><meta property="article:author" content="Bloodthirsty2B"><meta property="article:tag" content="canvas"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bloodthirsty2b.github.io/images/canvas/canvas_basic/Canvas_default_grid.png"><link rel="alternate" href="/atom.xml" title="BS2B&#39;s blog" type="application/atom+xml"><link rel="icon" href="/favicon.png"><link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="container"><div id="wrap"><header id="header"><div id="banner-wrap"><div id="canvas-gro"><canvas id="canvas-eff_behind" class="canvas" width="1920" height="400"></canvas><canvas id="canvas-eff_ghostimg" class="canvas" width="1920" height="300"></canvas><canvas id="canvas-main" class="canvas" width="1920" height="300"></canvas><canvas id="canvas-eff_front" class="canvas" width="1920" height="400"></canvas></div><div id="canvas-mask"></div><div id="banner" class="hide"></div></div><div id="header-outer" class="outer"><div id="header-title" class="inner"><h1 id="logo-wrap"><span href="/" id="logo">BS2B&#39;s blog</span></h1></div><div id="btn-animation-controler"><div id="btn-text">canvas初始化中…</div></div><div id="header-inner" class="inner"><nav id="main-nav"><a id="main-nav-toggle" class="nav-icon"></a> <a class="main-nav-link" href="/">Home</a> <a class="main-nav-link" href="/archives">Archives</a></nav><nav id="sub-nav"><a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a> <a id="nav-search-btn" class="nav-icon" title="Search"></a></nav><div id="search-form-wrap"><form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://bloodthirsty2b.github.io"></form></div></div></div></header><div class="outer"><section id="main"><article id="post-canvas/canvas2d基本使用" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2022/12/11/canvas/canvas2d%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" class="article-date"><time datetime="2022-12-11T11:50:51.000Z" itemprop="datePublished">2022-12-11</time></a><div class="article-category"><a class="article-category-link" href="/categories/canvas/">canvas</a></div></div><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">canvas2d系统和基本绘制</h1></header><div class="article-entry" itemprop="articleBody"><p>简单地说：初始状态的canvas是一张透明的画布，我们能用不同方法在canvas上画图。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">width</span>=<span class="string">&quot;1440&quot;</span> <span class="attr">height</span>=<span class="string">&quot;720&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure><p>canvas标签的特性只有宽和高可以设置。css中也可以改变它的宽高，但是默认保持原始宽高比。如果在css中强行同时设置宽高的话canvas标签和里面的画面会被拉伸，所以建议使用特性设置宽高。另外，虽然绘制过程中可以作出矢量图，但在浏览器渲染结束以后得到的是<strong>位图</strong>，这时通过样式放大的图将<strong>不会再具有矢量图的特性</strong>，马赛克严重。</p><ul><li><strong>兼容性</strong>：目前canvas基本得到了所有较新版本主流浏览器的支持，详见<a target="_blank" rel="noopener" href="https://www.caniuse.com/?search=canvas">Can I Use Canvas?</a> ，如果遇到了不兼容的浏览器的话，这里也有解决方案：</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">width</span>=<span class="string">&quot;1440&quot;</span> <span class="attr">height</span>=<span class="string">&quot;720&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span>被canvas标签包裹的内容只有当浏览器不支持canvas时会显示，其余时候自动隐藏。<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>可以使用一张静态图片代替<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>**<code>&lt;/canvas&gt;</code>**是必须的：如果没有写结束标签，那么<code>&lt;canvas&gt;</code>之后的所有内容都会被当做替代内容隐藏。</li></ul><span id="more"></span><ul><li>canvas也可以用来渲染3d内容，比如使用<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API">WebGL</a>。</li></ul><h2 id="一、使用步骤"><a href="#一、使用步骤" class="headerlink" title="一、使用步骤"></a>一、使用步骤</h2><ol><li>在html中插入canvas标签，设置id（比如tutorial）；</li><li>在js中找到canvas标签：<code>const canvas = document.getElementById(&#39;tutorial&#39;)</code>；</li><li>检查支持性：<code>if (!canvas.getContext) return</code>；</li><li>获取canvas2d画布：<code>const ctx = canvas.getContext(&#39;2d&#39;)</code>；</li><li>使用canvas自带的方法作画。</li></ol><h2 id="二、栅格系统-amp-形状绘制"><a href="#二、栅格系统-amp-形状绘制" class="headerlink" title="二、栅格系统&amp;形状绘制"></a>二、栅格系统&amp;形状绘制</h2><h3 id="1-栅格系统"><a href="#1-栅格系统" class="headerlink" title="1. 栅格系统"></a>1. 栅格系统</h3><p>​ 和绝大部分其他元素一样，默认canvas左上角为原点，向右为x轴正方向，向下为y轴正方向，单位是像素。原点可以用其他方法移动，网格也可以旋转和缩放。</p><p>​ <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/canvas/canvas_basic/Canvas_default_grid.png"></p><h3 id="2-形状绘制"><a href="#2-形状绘制" class="headerlink" title="2. 形状绘制"></a>2. 形状绘制</h3><ul><li><h4 id="矩形"><a href="#矩形" class="headerlink" title="矩形"></a>矩形</h4><p>一共有三个方法可以对矩形范围内的像素进行操作：</p><ol><li><code>fillRect(x, y, width, height)</code>画一个填充了颜色的矩形，x和y代表矩形左上角，下同；</li><li><code>strokeRect(x, y, width, height)</code>画一个指定矩形的外边框；</li><li><code>clearRect(x, y, width, height)</code>清除指定矩形内所有像素。</li></ol></li><li><h4 id="路径"><a href="#路径" class="headerlink" title="路径"></a>路径</h4><p>canvas只能画矩形和路径，也就是说除了矩形其他所有形状都要先<strong>建立路径</strong>再画。路径本身是<strong>透明</strong>的，必须要<strong>描边</strong>和<strong>填充</strong>才能在画面上显示出来。</p><p>通过路径画画的步骤：</p><ol><li>用<code>beginPath</code>方法新建一条路径，相当于把笔拿起来；</li><li>用<code>moveTo(x, y)</code>方法决定路径起始点(x, y)，相当于把笔尖放到点(x, y)；路径默认是连续的，想停笔再从新位置开始画就一定要使用<code>moveTo</code>；</li><li>用各种方法拖动路径，相当于在画面上规定想画的线；</li><li>如果是用<code>stroke</code>画<strong>闭合线条</strong>，那么需要手动或者用<code>closePath</code>方法闭合路径；<code>fill</code>画闭合填充不需要；</li><li>重复步骤234直到想画的线条&#x2F;想填充的区域已经规划好了，用<code>stroke()</code>或<code>fill()</code>方法描边&#x2F;填充。</li></ol><p>可以绘制的所有路径如下：</p><ul><li><p>线段：用<code>lineTo(x, y)</code>方法绘制一条从<strong>上一个路径的终点&#x2F;<code>moveTo</code>方法的决定点</strong>到(x, y)的路径</p></li><li><p>弧线：用<code>arc(x, y, r, 开始角度, 结束角度, 是否为逆时针)</code>绘制一条从点(x, y)、以r为半径的弧线。角度使用的是弧度制。</p></li><li><p>贝赛尔曲线：因为缺少视觉反馈，一般会结合辅助工具一起使用。</p><ul><li><p>用<code>quadraticCurveTo(cp1x, cp1y, x, y)</code>绘制二次贝赛尔曲线。(cp1x, cp1y)为控制点，(x, y)为结束点；</p></li><li><p>用<code>bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y)</code>绘制三次贝赛尔曲线。(cp1x, cp1y)为控制点1，(cp2x, cp2y)为控制点2，(x, y)为结束点；</p></li></ul></li><li><p>矩形：除了直接画矩形以外，也可以先通过<code>rect(x, y, width, height)</code>绘制路径再进行描边&#x2F;填充。这个方法在绘制前会自动执行<code>moveTo(x, y)</code>，最后路径会停在(x, y)。</p></li></ul></li><li><h4 id="构造函数Path2D（IE不支持）"><a href="#构造函数Path2D（IE不支持）" class="headerlink" title="构造函数Path2D（IE不支持）"></a>构造函数Path2D（<a target="_blank" rel="noopener" href="https://www.caniuse.com/?search=path2d">IE不支持</a>）</h4><ul><li>Path2D的实例可以将之前对路径的描述储存为一个路径对象，然后再把它作为<code>stroke</code>和<code>fill</code>的参数使用描边&#x2F;填充。这样可以让每个路径独立出来，可读性更强：</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> circle = <span class="keyword">new</span> <span class="title class_">Path2D</span>()</span><br><span class="line">circle.<span class="title function_">arc</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">25</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span> * <span class="number">2</span>)</span><br><span class="line">ctx.<span class="title function_">stroke</span>(circle)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> rectangle = <span class="keyword">new</span> <span class="title class_">Path2D</span>()</span><br><span class="line">rectangle.<span class="title function_">rect</span>(<span class="number">20</span>, <span class="number">20</span>, <span class="number">10</span>, <span class="number">20</span>) <span class="comment">// 由于rect自动重置起始点所以不用moveTo</span></span><br><span class="line">ctx.<span class="title function_">fill</span>(rectangle)</span><br></pre></td></tr></table></figure><ul><li><p>可以使用<code>new Path2D(path)</code>克隆一个新的路径实例</p></li><li><p><code>path1.addPath(path2[, transform])</code>可以将path2添加到path1中（只能添加一个），之后统一进行处理。transform则可以用来进行矩阵变换。</p></li><li><p>实例化的时候可以用SVG的路径数据来创建路径实例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// M20 10：移动到点(20, 10)</span></span><br><span class="line"><span class="comment">// h 70：水平方向正向移动70</span></span><br><span class="line"><span class="comment">// v 80：垂直方向正向移动80</span></span><br><span class="line"><span class="comment">// h -80：垂直方向逆向移动80</span></span><br><span class="line"><span class="comment">// Z：回到起点处</span></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="title class_">Path2D</span>(<span class="string">&quot;M20 10 h 70 v 80 h -80 Z&quot;</span>)</span><br><span class="line">ctx.<span class="title function_">stroke</span>(p) <span class="comment">// 会画出一个斜边在左的直角梯形</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><h2 id="三、色彩"><a href="#三、色彩" class="headerlink" title="三、色彩"></a>三、色彩</h2><ul><li><p>canvas中可以通过设置<code>strokeStyle</code>和<code>fillStyle</code>的值来分别给描边和填充上色。注意一旦设置了新颜色，这个颜色就是之后<strong>所有描边和填充的默认颜色</strong>了。想换颜色就再次设置吧。</p></li><li><p>设置颜色时要使用css3标准的有效字符串</p></li><li><p>透明度：</p><ul><li>通过改变<code>globalAlpha</code>的值来设置之后所有颜色的透明度，不透明是1.0(默认)，完全透明是0.0；</li><li>单个描边&#x2F;填充设置颜色的时候就在赋值的时候使用<code>rgba</code>就好，这个透明度会和<code>globalAlpha</code>的值以乘法叠加。一般只使用这个方法就好。</li></ul></li></ul><h2 id="四、线条"><a href="#四、线条" class="headerlink" title="四、线条"></a>四、线条</h2><p>线条有一系列属性可以修改样式：</p><ul><li><p><code>lineWidth = value</code>：设置线条宽度。默认为1.0。</p><p>线宽是指给定路径的中心到两边的粗细。</p><p>换句话说就是在路径的两边各绘制线宽的一半。因为画布的坐标并不和像素直接对应，当需要获得精确的水平或垂直线的时候要特别注意。</p></li><li><p><code>lineCap = type</code>：设置线条两端的样式；</p><p>有三种样式可以选择：</p><ul><li>butt(默认)</li><li>round</li><li>square</li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/canvas/canvas_basic/Canvas_linecap.png"></p></li><li><p><code>lineJoin = type</code>：设置两线段结合处的样式；</p><p>样式有三种：</p><ul><li>round</li><li>bevel</li><li>miter(默认)</li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/canvas/canvas_basic/Canvas_linejoin.png"></p></li><li><p><code>miterLimit = value</code>：限制当两条线相交时交接处最大长度；</p><p>所谓交接处长度（斜接长度）是指线条交接处内角顶点到外角顶点的长度。</p><p>两线相交时，线段的外侧边缘会被延伸交汇于一点上。线段之间夹角比较大时，交点不会太远，但随着夹角变小，交点距离会呈指数级增大。所以需要限制这个距离，如果交点距离大于设定值，连接效果就会变成 bevel。</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/canvas/canvas_basic/Canvas_miterlimit.png"></p></li><li><p><code>setLineDash([a, b])</code>：设置当前虚线样式。接受一个数组[a, b]：a表示实线长度，b表示间隔长度。</p></li><li><p><code>lineDashOffset</code>：设置虚线样式的起始偏移量。动画里可以通过不断改变其大小来实线虚线移动的效果。</p></li><li><p><code>getLineDash()</code>：返回一个包含当前虚线样式，长度为非负偶数的数组。</p></li></ul><h2 id="五、渐变色"><a href="#五、渐变色" class="headerlink" title="五、渐变色"></a>五、渐变色</h2><p>使用步骤：</p><ol><li><p>通过ctx的<code>createLinearGradient</code>或<code>createRadialGradient</code>方法创建一个<strong>渐变对象</strong>。</p><ul><li><code>createLinearGradient(x1, y1, x2, y2)</code>创建一个从(x1, y1)到(x2, y2)的渐变，方向从第一个点到第二个点。</li><li><code>createRadialGradient(x1, y1, r1, x2, y2, r2)</code>创建一个从圆(x1, y1, r1)到圆(x2, y2, r2)的渐变。<strong>注意第二个圆一定要完整覆盖住第一个圆</strong>。第一个圆内完全是范围0的颜色，第二个圆外完全是范围1的颜色。</li></ul></li><li><p>使用<strong>渐变对象</strong>的<code>addColorStop</code>方法在自己想要的地方添加基色(范围0.0 ~ 1.0)。</p><ul><li>如果两个颜色位置重复了，那么顺序会决定渐变颜色(比如：0处为black、0.5处为white、0.5处为red、1处为blue，那么0<del>0.5的地方是黑色到白色渐变，然后0.5</del>1的地方是红色到蓝色渐变，白色和红色之间不会有渐变)。</li></ul></li><li><p>设置ctx的<code>fillStyle</code>或<code>strokeStyle</code>属性的值为<strong>渐变对象</strong>。</p></li><li><p>使用各种描边和填充方法图上渐变色。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建渐变对象</span></span><br><span class="line"><span class="keyword">const</span> linGrad = ctx.<span class="title function_">createLinearGradient</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"><span class="keyword">const</span> radGrad = ctx.<span class="title function_">createRadialGradient</span>(<span class="number">100</span>, <span class="number">100</span>, <span class="number">0</span>, <span class="number">110</span>, <span class="number">110</span>, <span class="number">14.15</span>)<span class="comment">// 第二个圆的半径要大于10√2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 给线性渐变对象添加一个0.1处为&#x27;#f91&#x27;、0.9处为&#x27;#19f&#x27;的渐变</span></span><br><span class="line">linGrad.<span class="title function_">addColorStop</span>(<span class="number">.1</span>, <span class="string">&#x27;#f91&#x27;</span>)</span><br><span class="line">linGrad.<span class="title function_">addColorStop</span>(<span class="number">.9</span>, <span class="string">&#x27;#19f&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给辐射渐变对象添加0处为白色、0.7处为黑色的渐变</span></span><br><span class="line">radGrad.<span class="title function_">addColorStop</span>(<span class="number">0</span>, <span class="string">&#x27;#fff&#x27;</span>)</span><br><span class="line">radGrad.<span class="title function_">addColorStop</span>(<span class="number">.7</span>, <span class="string">&#x27;#000&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 改变笔刷颜色</span></span><br><span class="line">ctx.<span class="property">strokeStyle</span> = linGrad</span><br><span class="line">ctx.<span class="property">fillStyle</span> = radGrad</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给需要的地方上色</span></span><br><span class="line">ctx.<span class="title function_">fillRect</span>(<span class="number">90</span>, <span class="number">90</span>, <span class="number">130</span>, <span class="number">130</span>)</span><br><span class="line">ctx.<span class="title function_">strokeRect</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">15</span>, <span class="number">25</span>)</span><br></pre></td></tr></table></figure></li></ol><h2 id="六、图案-pattern"><a href="#六、图案-pattern" class="headerlink" title="六、图案-pattern"></a>六、图案-pattern</h2><ul><li><p>canvas支持用重复图案填充，使用的方法为<code>createPattern(image, type)</code>：</p><ul><li>image：可以是Image对象或者另一个canvas画布对象。使用Image实例时要确定图像已经加载完毕，一般将语句放在load事件内。</li><li>type：取值为<code>repeat</code>、<code>repeat-x</code>、<code>repeat-y</code>、<code>no-repeat</code></li></ul></li><li><p>使用方法：</p><ol><li>获取img对象或者其他canvas对象。</li><li>使用<code>ctx.createPattern</code>方法创建一个图案对象。</li><li>将<code>fillStyle</code>或<code>strokeStyle</code>属性赋值为图案对象</li><li>描边或填充</li></ol></li></ul><h2 id="七、阴影"><a href="#七、阴影" class="headerlink" title="七、阴影"></a>七、阴影</h2><p>和css中类似，需要设置四个值：</p><ul><li><code>shadowOffsetX</code>和<code>shadowOffsetY</code>：取值为浮点数，设定阴影延伸距离，正方向分别为→和↓。</li><li><code>shadowBlur</code>：取值为浮点数，设定模糊程度。</li><li><code>shadowColor</code>：取值为标准css颜色值，默认为rgba(0, 0, 0, 0)</li></ul><h2 id="八、填充规则"><a href="#八、填充规则" class="headerlink" title="八、填充规则"></a>八、填充规则</h2><p>当用到 <code>fill</code>（或者 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/clip"><code>clip</code></a>和<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/isPointInPath"><code>isPointinPath</code></a> ）时可以选择一个填充规则。该填充规则根据某处在路径的外面或者里面来决定该处是否被填充，这对于自己与自己路径相交或者路径被嵌套的时候是有用的。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ctx.<span class="title function_">beginPath</span>()</span><br><span class="line">ctx.<span class="title function_">arc</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">30</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span>*<span class="number">2</span>, <span class="literal">true</span>)</span><br><span class="line">ctx.<span class="title function_">arc</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">15</span>, <span class="number">0</span>, <span class="title class_">Math</span>.<span class="property">PI</span>*<span class="number">2</span>, <span class="literal">true</span>)</span><br><span class="line">ctx.<span class="title function_">fill</span>(<span class="string">&quot;evenodd&quot;</span>)<span class="comment">// 这样被填充的是两个路径之间的内容</span></span><br></pre></td></tr></table></figure><h2 id="九、文本"><a href="#九、文本" class="headerlink" title="九、文本"></a>九、文本</h2><p>canvas支持绘制文本或者文本的外轮廓：</p><ul><li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/fillText"><code>ctx.fillText(text, x, y [, maxWidth])</code></a>：从<code>(x, y)</code>处绘制一个内容是<code>text</code>(，最大宽度为<code>maxWidth</code>)的文本</li><li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/strokeText"><code>ctx.strokeText(text, x, y [, maxWidth])</code></a>：和上面的方法类似，不同的是绘制的是文本的外轮廓（类似华文彩云）</li></ul><p>canvas支持修改文本样式：</p><ul><li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/font"><code>ctx.font</code></a>：和css相同，可以修改是否斜体、文字粗细、文字大小、文字字体</li><li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/textAlign"><code>ctx.textAlign</code></a>：和css相同</li><li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/textBaseline"><code>ctxtextBaseline</code></a>：基线对齐选项。可选的值包括：<code>top</code>, <code>hanging</code>, <code>middle</code>, <code>alphabetic</code>, <code>ideographic</code>, <code>bottom</code>。默认值是 <code>alphabetic</code>。</li><li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/direction"><code>ctx.direction</code></a>：文本方向。可能的值包括：<code>ltr</code>, <code>rtl</code>, <code>inherit</code>。默认值是 <code>inherit</code>。</li></ul><h2 id="十、图片"><a href="#十、图片" class="headerlink" title="十、图片"></a>十、图片</h2><p>canvas中可以使用外链的图片来作图：</p><ol><li>获取图片&#x2F;其他canvas元素作为图源。</li><li>使用<code>drawImage</code>方法把图片绘制到canvas中。</li></ol><h3 id="图源："><a href="#图源：" class="headerlink" title="图源："></a>图源：</h3><ul><li>同一页面内的图片：如果需要用页面内已经读取的img元素内的图片，canvas可以直接使用其dom对象。</li><li>使用其他域名内的图片：通过跨域，canvas可以加载其他域名内的图片。但如果服务器不允许跨域访问，那么有<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/CORS_Enabled_Image#.E4.BB.80.E4.B9.88.E6.98.AF.22.E8.A2.AB.E6.B1.A1.E6.9F.93.22.E7.9A.84canvas">污染canvas</a>的风险。</li><li>使用其他canvas元素：drawImage方法支持使用其他canvas的dom对象，该方法常用于缩略图和双缓冲中。</li><li>读取新图片：可以使用Image构造函数获取一张新图片。不过需要把回调函数放到load事件中，否则要么什么都不会发生，要么会报错。</li><li>使用<code>data:url</code>获取图片：使用base64编码的字符串来定义图片。缺点是图片无法缓存，同时图片太大会导致html文件过大。</li><li>使用视频帧截图：canvas支持使用video标签的视频帧，将当前视频播放的画面渲染到canvas上。</li></ul><h3 id="绘图："><a href="#绘图：" class="headerlink" title="绘图："></a>绘图：</h3><p><code>drawImage</code>方法有三种使用手段：</p><ul><li><code>ctx.drawImage(image, x, y)</code>：最基础的使用方法，以<code>ctx</code>的点<code>(x, y)</code>为左上角，绘制<code>image</code>图源，大小和图源相同。</li><li><code>ctx.drawImage(image, x, y, width, height)</code>：可以缩放图源的方法，通过<code>width</code>和<code>height</code>来控制绘制在canvas上的宽高。</li><li><code>ctx.drawImage(image, x0, y0, width0, height0, x, y, width, height)</code>：终极方法，可以截取图源<code>image</code>的内容。从以点<code>(x0, y0)</code>为左上角，以<code>width0</code>和<code>height0</code>为宽高把需要的内容截取出来，然后绘制在canvas上，绘制方法和第二条一样。常用于精灵图的展示。</li></ul><h3 id="是否在图像缩放时平滑处理："><a href="#是否在图像缩放时平滑处理：" class="headerlink" title="是否在图像缩放时平滑处理："></a>是否在图像缩放时平滑处理：</h3><p>图源在被过度缩放时会产生模糊或像素化，canvas默认会将平滑处理功能打开。根据需要也可以关闭这个功能：</p><ul><li><code>ctx.imageSmoothimgEnabled = boolean</code>：默认值为true。</li></ul></div><footer class="article-footer"><a data-url="https://bloodthirsty2b.github.io/2022/12/11/canvas/canvas2d%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" data-id="cm6z8q6jl002c8ou81v4x6g3y" class="article-share-link">Share</a><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/canvas/" rel="tag">canvas</a></li></ul></footer></div><nav id="article-nav"><a href="/2022/12/12/canvas/canvas2d%E5%8F%98%E5%BD%A2%E3%80%81%E5%90%88%E6%88%90%E3%80%81%E8%A3%81%E5%89%AA/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">Newer</strong><div class="article-nav-title">canvas2d状态保存&amp;恢复、变形、合成、裁剪</div></a><a href="/2022/07/05/miniProgram/%E6%94%AF%E4%BB%98%E6%B5%81%E7%A8%8B/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">支付流程</div></a></nav></article></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">Categories</h3><div class="widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue/">Vue</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Vue/Element-ui/">Element-ui</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue/Vuex/">Vuex</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/canvas/">canvas</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/css/mobile/">mobile</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/html/">html</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/js/Ajax/">Ajax</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/JQuery/">JQuery</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/RegExp/">RegExp</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/es6/">es6</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/nodejs/">nodejs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/webAPI/">webAPI</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/miniProgram/">miniProgram</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/plugin/">plugin</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/test/">test</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/test/Git/">Git</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/webpack/">webpack</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Tags</h3><div class="widget"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ajax/" rel="tag">Ajax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Element-ui/" rel="tag">Element-ui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JQuery/" rel="tag">JQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RegExp/" rel="tag">RegExp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vuex/" rel="tag">Vuex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/canvas/" rel="tag">canvas</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/" rel="tag">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/" rel="tag">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/miniProgram/" rel="tag">miniProgram</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mobile/" rel="tag">mobile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/plugin/" rel="tag">plugin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/test/" rel="tag">test</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webAPI/" rel="tag">webAPI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Tag Cloud</h3><div class="widget tagcloud"><a href="/tags/Ajax/" style="font-size:13.75px">Ajax</a> <a href="/tags/Element-ui/" style="font-size:10px">Element-ui</a> <a href="/tags/Git/" style="font-size:10px">Git</a> <a href="/tags/JQuery/" style="font-size:15px">JQuery</a> <a href="/tags/React/" style="font-size:15px">React</a> <a href="/tags/RegExp/" style="font-size:10px">RegExp</a> <a href="/tags/Vue/" style="font-size:18.75px">Vue</a> <a href="/tags/Vuex/" style="font-size:10px">Vuex</a> <a href="/tags/canvas/" style="font-size:13.75px">canvas</a> <a href="/tags/css/" style="font-size:17.5px">css</a> <a href="/tags/es6/" style="font-size:18.75px">es6</a> <a href="/tags/html/" style="font-size:10px">html</a> <a href="/tags/js/" style="font-size:20px">js</a> <a href="/tags/miniProgram/" style="font-size:15px">miniProgram</a> <a href="/tags/mobile/" style="font-size:13.75px">mobile</a> <a href="/tags/nodejs/" style="font-size:13.75px">nodejs</a> <a href="/tags/plugin/" style="font-size:15px">plugin</a> <a href="/tags/test/" style="font-size:12.5px">test</a> <a href="/tags/webAPI/" style="font-size:16.25px">webAPI</a> <a href="/tags/webpack/" style="font-size:11.25px">webpack</a></div></div><div class="widget-wrap"><h3 class="widget-title">Archives</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">February 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">December 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">August 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">May 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">December 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Recent Posts</h3><div class="widget"><ul><li><a href="/2025/02/04/js/%E7%BB%99%E5%AF%B9%E8%B1%A1%E6%B7%BB%E5%8A%A0filter%E6%96%B9%E6%B3%95/">给对象添加filter方法</a></li><li><a href="/2024/12/25/js/export-default%E5%92%8Cimport%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/">export default和import的解构赋值</a></li><li><a href="/2024/12/18/html/blob%E5%BC%80%E5%A4%B4%E7%9A%84%E8%A7%86%E9%A2%91%E5%9C%B0%E5%9D%80/">blob开头的视频地址</a></li><li><a href="/2024/08/13/js/%E6%AD%A3%E5%88%99%E8%BF%9B%E9%98%B6/">正则进阶</a></li><li><a href="/2024/07/11/js/try-catch-finally/">try catch finally</a></li></ul></div></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2025 Bloodthirsty2B<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></div></div></footer></div><nav id="mobile-nav"><a href="/" class="mobile-nav-link">Home</a> <a href="/archives" class="mobile-nav-link">Archives</a></nav><script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script src="/js/script.js"></script></div><script src="/js/c1.js"></script><script src="/js/c2.js"></script><style>[bg-lazy]{background-image:none!important;background-color:#eee!important}</style><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:1,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(e){e.imageLazyLoadSetting.processImages=t;var n=e.imageLazyLoadSetting.isSPA,i=e.imageLazyLoadSetting.preloadRatio||1,r=o();function o(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(){n&&(r=o());for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(e.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i=r[a],o=function(){r=r.filter(function(t){return i!==t})};(t=i).hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),o()):(e=new Image,n=t.getAttribute("data-original"),e.onload=function(){t.src=n,t.removeAttribute("data-original"),o()},t.src!==n&&(e.src=n))}()}function a(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",a),e.addEventListener("resize",a),e.addEventListener("orientationchange",a)}(this)</script></body></html>